{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "switch",
  "type": "registry:ui",
  "title": "开关",
  "description": "开关组件，用于切换等元素的开关状态",
  "dependencies": [
    "@react-aria/switch"
  ],
  "files": [
    {
      "path": "registry/ui/switch/index.ts",
      "content": "import Switch from \"./switch\";\n\n// export types\nexport type { SwitchProps } from \"./switch\";\nexport type { SwitchThumbIconProps } from \"./use-switch\";\n\n// export hooks\nexport { useSwitch } from \"./use-switch\";\n\n// export component\nexport { Switch };\n",
      "type": "registry:ui"
    },
    {
      "path": "registry/ui/switch/switch.tsx",
      "content": "import type { ReactElement } from \"react\";\nimport type { UseSwitchProps } from \"./use-switch\";\n\nimport { cloneElement } from \"react\";\n\nimport { useSwitch } from \"./use-switch\";\n\nimport { forwardRef } from \"@/lib/system\";\n\nexport interface SwitchProps extends UseSwitchProps {}\n\nconst Switch = forwardRef<\"input\", SwitchProps>((props, ref) => {\n  const {\n    Component,\n    children,\n    startContent,\n    endContent,\n    thumbIcon,\n    getBaseProps,\n    getInputProps,\n    getWrapperProps,\n    getThumbProps,\n    getThumbIconProps,\n    getLabelProps,\n    getStartContentProps,\n    getEndContentProps,\n  } = useSwitch({ ...props, ref });\n\n  const clonedThumbIcon =\n    typeof thumbIcon === \"function\"\n      ? thumbIcon(getThumbIconProps({ includeStateProps: true }))\n      : thumbIcon && cloneElement(thumbIcon as ReactElement, getThumbIconProps());\n\n  const clonedStartContent = startContent && cloneElement(startContent as ReactElement, getStartContentProps());\n  const clonedEndContent = endContent && cloneElement(endContent as ReactElement, getEndContentProps());\n\n  return (\n    <Component {...getBaseProps()}>\n      <input {...getInputProps()} />\n      <span {...getWrapperProps()}>\n        {startContent && clonedStartContent}\n        <span {...getThumbProps()}>{thumbIcon && clonedThumbIcon}</span>\n        {endContent && clonedEndContent}\n      </span>\n      {children && <span {...getLabelProps()}>{children}</span>}\n    </Component>\n  );\n});\n\nSwitch.displayName = \"HeroUI.Switch\";\n\nexport default Switch;\n",
      "type": "registry:ui"
    },
    {
      "path": "registry/ui/switch/theme.ts",
      "content": "import type { VariantProps } from \"tailwind-variants\";\n\nimport { groupDataFocusVisibleClasses, hiddenInputClasses } from \"@/lib/theme/utils/classes\";\nimport { tv } from \"@/lib/theme/utils/tv\";\n\n/**\n * Toggle (Switch) wrapper **Tailwind Variants** component\n *\n * const {base, wrapper, thumb, thumbIcon, label, startContent, endContent} = toggle({...})\n *\n * @example\n * <label\n *    className={base())}\n *    data-selected={true/false}\n *    data-pressed={true/false}\n *    data-focus={true/false}\n *    data-hover={true/false}\n *    data-focus-visible={true/false}\n * >\n *  <input/> // hidden input\n *  <span className={wrapper()} aria-hidden=\"true\">\n *    <svg className={startContent()}>...</svg>\n *    <span className={thumb()}>\n *      <svg className={thumbIcon()}>...</svg>\n *    </span>\n *    <svg className={endContent()}>...</svg>\n *  </span>\n *  <span className={label()}>Label</span>\n * </label>\n */\nconst toggle = tv({\n  slots: {\n    base: \"group relative max-w-fit inline-flex items-center justify-start cursor-pointer touch-none tap-highlight-transparent select-none\",\n    wrapper: [\n      \"px-1\",\n      \"relative\",\n      \"inline-flex\",\n      \"items-center\",\n      \"justify-start\",\n      \"shrink-0\",\n      \"overflow-hidden\",\n      \"bg-default-200\",\n      \"rounded-full\",\n      // focus ring\n      ...groupDataFocusVisibleClasses,\n    ],\n    thumb: [\n      \"z-10\",\n      \"flex\",\n      \"items-center\",\n      \"justify-center\",\n      \"bg-white\",\n      \"shadow-small\",\n      \"rounded-full\",\n      \"origin-right\",\n      \"pointer-events-none\",\n    ],\n    hiddenInput: hiddenInputClasses,\n    startContent: \"z-0 absolute start-1.5 text-current\",\n    endContent: \"z-0 absolute end-1.5 text-default-600\",\n    thumbIcon: \"text-black\",\n    label: \"relative text-foreground select-none ms-2\",\n  },\n  variants: {\n    color: {\n      default: {\n        wrapper: [\"group-data-[selected=true]:bg-default-400\", \"group-data-[selected=true]:text-default-foreground\"],\n      },\n      primary: {\n        wrapper: [\"group-data-[selected=true]:bg-primary\", \"group-data-[selected=true]:text-primary-foreground\"],\n      },\n      secondary: {\n        wrapper: [\"group-data-[selected=true]:bg-secondary\", \"group-data-[selected=true]:text-secondary-foreground\"],\n      },\n      success: {\n        wrapper: [\"group-data-[selected=true]:bg-success\", \"group-data-[selected=true]:text-success-foreground\"],\n      },\n      warning: {\n        wrapper: [\"group-data-[selected=true]:bg-warning\", \"group-data-[selected=true]:text-warning-foreground\"],\n      },\n      danger: {\n        wrapper: [\"group-data-[selected=true]:bg-danger\", \"data-[selected=true]:text-danger-foreground\"],\n      },\n    },\n    size: {\n      sm: {\n        wrapper: \"w-10 h-6\",\n        thumb: [\n          \"w-4 h-4 text-tiny\",\n          //selected\n          \"group-data-[selected=true]:ms-4\",\n        ],\n        endContent: \"text-tiny\",\n        startContent: \"text-tiny\",\n        label: \"text-small\",\n      },\n      md: {\n        wrapper: \"w-12 h-7\",\n        thumb: [\n          \"w-5 h-5 text-small\",\n          //selected\n          \"group-data-[selected=true]:ms-5\",\n        ],\n        endContent: \"text-small\",\n        startContent: \"text-small\",\n        label: \"text-medium\",\n      },\n      lg: {\n        wrapper: \"w-14 h-8\",\n        thumb: [\n          \"w-6 h-6 text-medium\",\n          //selected\n          \"group-data-[selected=true]:ms-6\",\n        ],\n        endContent: \"text-medium\",\n        startContent: \"text-medium\",\n        label: \"text-large\",\n      },\n    },\n    isDisabled: {\n      true: {\n        base: \"opacity-disabled pointer-events-none\",\n      },\n    },\n    disableAnimation: {\n      true: {\n        wrapper: \"transition-none\",\n        thumb: \"transition-none\",\n      },\n      false: {\n        wrapper: \"transition-background\",\n        thumb: \"transition-all\",\n        startContent: [\n          \"opacity-0\",\n          \"scale-50\",\n          \"transition-transform-opacity\",\n          \"group-data-[selected=true]:scale-100\",\n          \"group-data-[selected=true]:opacity-100\",\n        ],\n        endContent: [\n          \"opacity-100\",\n          \"transition-transform-opacity\",\n          \"group-data-[selected=true]:translate-x-3\",\n          \"group-data-[selected=true]:opacity-0\",\n        ],\n      },\n    },\n  },\n  defaultVariants: {\n    color: \"primary\",\n    size: \"md\",\n    isDisabled: false,\n  },\n  compoundVariants: [\n    {\n      disableAnimation: false,\n      size: \"sm\",\n      class: {\n        thumb: [\"group-data-[pressed=true]:w-5\", \"group-data-[selected]:group-data-[pressed]:ml-3\"],\n      },\n    },\n    {\n      disableAnimation: false,\n      size: \"md\",\n      class: {\n        thumb: [\"group-data-[pressed=true]:w-6\", \"group-data-[selected]:group-data-[pressed]:ml-4\"],\n      },\n    },\n    {\n      disableAnimation: false,\n      size: \"lg\",\n      class: {\n        thumb: [\"group-data-[pressed=true]:w-7\", \"group-data-[selected]:group-data-[pressed]:ml-5\"],\n      },\n    },\n  ],\n});\n\nexport type ToggleVariantProps = VariantProps<typeof toggle>;\nexport type ToggleSlots = keyof ReturnType<typeof toggle>;\n\nexport { toggle };\n",
      "type": "registry:ui"
    },
    {
      "path": "registry/ui/switch/use-switch.ts",
      "content": "import type { HTMLHeroUIProps, PropGetter } from \"@/lib/system\";\nimport type { AriaSwitchProps } from \"@react-aria/switch\";\nimport type { ReactNode, Ref } from \"react\";\nimport type { ToggleSlots, ToggleVariantProps } from \"./theme\";\nimport type { SlotsToClasses } from \"@/lib/theme/utils/types\";\n\nimport { useFocusRing } from \"@react-aria/focus\";\nimport { useHover } from \"@react-aria/interactions\";\nimport { useSwitch as useReactAriaSwitch } from \"@react-aria/switch\";\nimport { useToggleState } from \"@react-stately/toggle\";\nimport { useCallback, useId, useMemo, useRef } from \"react\";\n\nimport { toggle } from \"./theme\";\n\nimport { useSafeLayoutEffect } from \"@/hooks/use-safe-layout-effect\";\nimport { chain, clsx, dataAttr, mergeProps, objectToDeps } from \"@/lib/base\";\nimport { mergeRefs } from \"@/lib/react/refs\";\nimport { mapPropsVariants, useProviderContext } from \"@/lib/system\";\n\nexport type SwitchThumbIconProps = {\n  width: string;\n  height: string;\n  \"data-checked\": string;\n  isSelected: boolean;\n  className: string;\n};\n\ninterface Props extends HTMLHeroUIProps<\"input\"> {\n  /**\n   * Ref to the DOM node.\n   */\n  ref?: Ref<HTMLInputElement>;\n  /**\n   * The label of the switch.\n   */\n  children?: ReactNode;\n  /**\n   * Whether the switch is disabled.\n   * @default false\n   */\n  isDisabled?: boolean;\n  /**\n   * The icon to be displayed inside the thumb.\n   */\n  thumbIcon?: ReactNode | ((props: SwitchThumbIconProps) => ReactNode);\n  /**\n   * Start icon to be displayed inside the switch.\n   */\n  startContent?: ReactNode;\n  /**\n   * End icon to be displayed inside the switch.\n   */\n  endContent?: ReactNode;\n  /**\n   * Classname or List of classes to change the classNames of the element.\n   * if `className` is passed, it will be added to the base slot.\n   *\n   * @example\n   * ```ts\n   * <Switch classNames={{\n   *    base:\"base-classes\",\n   *    wrapper: \"wrapper-classes\",\n   *    thumb: \"thumb-classes\",\n   *    thumbIcon: \"thumbIcon-classes\",\n   *    label: \"label-classes\",\n   * }} />\n   * ```\n   */\n  classNames?: SlotsToClasses<ToggleSlots>;\n  /**\n   * React aria onChange event.\n   */\n  onValueChange?: AriaSwitchProps[\"onChange\"];\n}\n\nexport type UseSwitchProps = Omit<Props, \"defaultChecked\"> &\n  Omit<AriaSwitchProps, keyof ToggleVariantProps | \"onChange\"> &\n  ToggleVariantProps;\n\nexport function useSwitch(originalProps: UseSwitchProps = {}) {\n  const globalContext = useProviderContext();\n\n  const [props, variantProps] = mapPropsVariants(originalProps, toggle.variantKeys);\n\n  const {\n    ref,\n    as,\n    name,\n    value = \"\",\n    isReadOnly: isReadOnlyProp = false,\n    autoFocus = false,\n    startContent,\n    endContent,\n    defaultSelected,\n    isSelected: isSelectedProp,\n    children,\n    thumbIcon,\n    className,\n    classNames,\n    onChange,\n    onValueChange,\n    ...otherProps\n  } = props;\n\n  const Component = as || \"label\";\n\n  const domRef = useRef<HTMLLabelElement>(null);\n\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const disableAnimation = originalProps.disableAnimation ?? globalContext?.disableAnimation ?? false;\n\n  const labelId = useId();\n\n  const ariaSwitchProps = useMemo(() => {\n    const ariaLabel = otherProps[\"aria-label\"] || typeof children === \"string\" ? (children as string) : undefined;\n\n    return {\n      name,\n      value,\n      children,\n      autoFocus,\n      defaultSelected,\n      isSelected: isSelectedProp,\n      isDisabled: !!originalProps.isDisabled,\n      isReadOnly: isReadOnlyProp,\n      \"aria-label\": ariaLabel,\n      \"aria-labelledby\": otherProps[\"aria-labelledby\"] || labelId,\n      onChange: onValueChange,\n    };\n  }, [\n    value,\n    name,\n    labelId,\n    children,\n    autoFocus,\n    isReadOnlyProp,\n    isSelectedProp,\n    defaultSelected,\n    originalProps.isDisabled,\n    otherProps[\"aria-label\"],\n    otherProps[\"aria-labelledby\"],\n    onValueChange,\n  ]);\n\n  const state = useToggleState(ariaSwitchProps);\n\n  // if we use `react-hook-form`, it will set the switch value using the ref in register\n  // i.e. setting ref.current.checked to true or false which is uncontrolled\n  // hence, sync the state with `ref.current.checked`\n  useSafeLayoutEffect(() => {\n    if (!inputRef.current) return;\n    const isInputRefChecked = !!inputRef.current.checked;\n\n    state.setSelected(isInputRefChecked);\n  }, [inputRef.current]);\n\n  const { inputProps, isPressed, isReadOnly } = useReactAriaSwitch(ariaSwitchProps, state, inputRef);\n  const { focusProps, isFocused, isFocusVisible } = useFocusRing({ autoFocus: inputProps.autoFocus });\n  const { hoverProps, isHovered } = useHover({\n    isDisabled: inputProps.disabled,\n  });\n\n  const isInteractionDisabled = ariaSwitchProps.isDisabled || isReadOnly;\n\n  const pressed = isInteractionDisabled ? false : isPressed;\n\n  const isSelected = inputProps.checked;\n  const isDisabled = inputProps.disabled;\n\n  const slots = useMemo(\n    () =>\n      toggle({\n        ...variantProps,\n        disableAnimation,\n      }),\n    [objectToDeps(variantProps), disableAnimation],\n  );\n\n  const baseStyles = clsx(classNames?.base, className);\n\n  const getBaseProps: PropGetter = (props) => {\n    return {\n      ...mergeProps(hoverProps, otherProps, props),\n      ref: domRef,\n      className: slots.base({ class: clsx(baseStyles, props?.className) }),\n      \"data-disabled\": dataAttr(isDisabled),\n      \"data-selected\": dataAttr(isSelected),\n      \"data-readonly\": dataAttr(isReadOnly),\n      \"data-focus\": dataAttr(isFocused),\n      \"data-focus-visible\": dataAttr(isFocusVisible),\n      \"data-hover\": dataAttr(isHovered),\n      \"data-pressed\": dataAttr(pressed),\n    };\n  };\n\n  const getWrapperProps: PropGetter = useCallback(\n    (props = {}) => {\n      return {\n        ...props,\n        \"aria-hidden\": true,\n        className: clsx(slots.wrapper({ class: clsx(classNames?.wrapper, props?.className) })),\n      };\n    },\n    [slots, classNames?.wrapper],\n  );\n\n  const getInputProps: PropGetter = (props = {}) => {\n    return {\n      ...mergeProps(inputProps, focusProps, props),\n      ref: mergeRefs(inputRef, ref),\n      id: inputProps.id,\n      className: slots.hiddenInput({ class: classNames?.hiddenInput }),\n      onChange: chain(onChange, inputProps.onChange),\n    };\n  };\n\n  const getThumbProps: PropGetter = useCallback(\n    (props = {}) => ({\n      ...props,\n      className: slots.thumb({ class: clsx(classNames?.thumb, props?.className) }),\n    }),\n    [slots, classNames?.thumb],\n  );\n\n  const getLabelProps: PropGetter = useCallback(\n    (props = {}) => ({\n      ...props,\n      id: labelId,\n      className: slots.label({ class: clsx(classNames?.label, props?.className) }),\n    }),\n    [slots, classNames?.label, isDisabled, isSelected],\n  );\n\n  const getThumbIconProps = useCallback(\n    (\n      props = {\n        includeStateProps: false,\n      },\n    ) =>\n      mergeProps(\n        {\n          width: \"1em\",\n          height: \"1em\",\n          className: slots.thumbIcon({ class: clsx(classNames?.thumbIcon) }),\n        },\n        props.includeStateProps\n          ? {\n              isSelected: isSelected,\n            }\n          : {},\n      ) as unknown as SwitchThumbIconProps,\n    [slots, classNames?.thumbIcon, isSelected],\n  );\n\n  const getStartContentProps = useCallback<PropGetter>(\n    (props = {}) => ({\n      width: \"1em\",\n      height: \"1em\",\n      ...props,\n      className: slots.startContent({ class: clsx(classNames?.startContent, props?.className) }),\n    }),\n    [slots, classNames?.startContent, isSelected],\n  );\n\n  const getEndContentProps = useCallback<PropGetter>(\n    (props = {}) => ({\n      width: \"1em\",\n      height: \"1em\",\n      ...props,\n      className: slots.endContent({ class: clsx(classNames?.endContent, props?.className) }),\n    }),\n    [slots, classNames?.endContent, isSelected],\n  );\n\n  return {\n    Component,\n    slots,\n    classNames,\n    domRef,\n    children,\n    thumbIcon,\n    startContent,\n    endContent,\n    isHovered,\n    isSelected,\n    isPressed: pressed,\n    isFocused,\n    isFocusVisible,\n    isDisabled,\n    getBaseProps,\n    getWrapperProps,\n    getInputProps,\n    getLabelProps,\n    getThumbProps,\n    getThumbIconProps,\n    getStartContentProps,\n    getEndContentProps,\n  };\n}\n\nexport type UseSwitchReturn = ReturnType<typeof useSwitch>;\n",
      "type": "registry:ui"
    },
    {
      "path": "lib/react/refs.ts",
      "content": "import type { MutableRefObject } from \"react\";\n\nimport { isFunction } from \"../base/assertion\";\nimport { ReactRef } from \"./types\";\n\n/**\n * Assigns a value to a ref function or object\n *\n * @param ref the ref to assign to\n * @param value the value\n */\nexport function assignRef<T = any>(ref: ReactRef<T> | undefined, value: T) {\n  if (ref == null) return;\n\n  if (isFunction(ref)) {\n    ref(value);\n\n    return;\n  }\n\n  try {\n    (ref as MutableRefObject<T>).current = value;\n  } catch {\n    throw new Error(`Cannot assign value '${value}' to ref '${ref}'`);\n  }\n}\n\n/**\n * Combine multiple React refs into a single ref function.\n * This is used mostly when you need to allow consumers forward refs to\n * internal components\n *\n * @param refs refs to assign to value to\n */\nexport function mergeRefs<T>(...refs: (ReactRef<T> | undefined)[]) {\n  return (node: T | null) => {\n    refs.forEach((ref) => assignRef(ref, node));\n  };\n}\n",
      "type": "registry:lib"
    },
    {
      "path": "hooks/use-safe-layout-effect/index.ts",
      "content": "import { useEffect, useLayoutEffect } from \"react\";\n\nexport const useSafeLayoutEffect = Boolean(globalThis?.document) ? useLayoutEffect : useEffect;\n",
      "type": "registry:hook"
    }
  ]
}