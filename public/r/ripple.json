{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "ripple",
  "type": "registry:ui",
  "title": "涟漪效果",
  "description": "涟漪效果组件，用于按钮等元素的点击效果",
  "dependencies": [],
  "files": [
    {
      "path": "registry/ui/ripple/index.ts",
      "content": "import Ripple from \"./ripple\";\n\n// export types\nexport type { RippleProps } from \"./ripple\";\nexport type { RippleType } from \"./use-ripple\";\n\n// export hooks\nexport { useRipple } from \"./use-ripple\";\n\n// export component\nexport { Ripple };\n",
      "type": "registry:ui"
    },
    {
      "path": "registry/ui/ripple/ripple.tsx",
      "content": "import type { HTMLHeroUIProps } from \"@/lib/system\";\nimport type { HTMLMotionProps } from \"framer-motion\";\nimport type { FC } from \"react\";\nimport type { RippleType } from \"./use-ripple\";\n\nimport { AnimatePresence, LazyMotion, m } from \"framer-motion\";\n\nimport { clamp } from \"@/lib/base\";\n\nexport interface RippleProps extends HTMLHeroUIProps<\"span\"> {\n  ripples: RippleType[];\n  color?: string;\n  motionProps?: Omit<HTMLMotionProps<\"span\">, \"ref\">;\n  style?: React.CSSProperties;\n  onClear: (key: React.Key) => void;\n}\n\nconst domAnimation = () => import(\"@/lib/dom-animation\").then((res) => res.default);\n\nconst Ripple: FC<RippleProps> = (props) => {\n  const { ripples = [], motionProps, color = \"currentColor\", style, onClear } = props;\n\n  return (\n    <>\n      {ripples.map((ripple) => {\n        const duration = clamp(0.01 * ripple.size, 0.2, ripple.size > 100 ? 0.75 : 0.5);\n\n        return (\n          <LazyMotion key={ripple.key} features={domAnimation}>\n            <AnimatePresence mode=\"popLayout\">\n              <m.span\n                animate={{ transform: \"scale(2)\", opacity: 0 }}\n                className=\"heroui-ripple\"\n                exit={{ opacity: 0 }}\n                initial={{ transform: \"scale(0)\", opacity: 0.35 }}\n                style={{\n                  position: \"absolute\",\n                  backgroundColor: color,\n                  borderRadius: \"100%\",\n                  transformOrigin: \"center\",\n                  pointerEvents: \"none\",\n                  overflow: \"hidden\",\n                  inset: 0,\n                  zIndex: 0,\n                  top: ripple.y,\n                  left: ripple.x,\n                  width: `${ripple.size}px`,\n                  height: `${ripple.size}px`,\n                  ...style,\n                }}\n                transition={{ duration }}\n                onAnimationComplete={() => {\n                  onClear(ripple.key);\n                }}\n                {...motionProps}\n              />\n            </AnimatePresence>\n          </LazyMotion>\n        );\n      })}\n    </>\n  );\n};\n\nRipple.displayName = \"HeroUI.Ripple\";\n\nexport default Ripple;\n",
      "type": "registry:ui"
    },
    {
      "path": "registry/ui/ripple/use-ripple.ts",
      "content": "\"use client\";\n\nimport type { PressEvent } from \"@react-types/shared\";\nimport type React from \"react\";\n\nimport { useCallback, useState } from \"react\";\n\nimport { getUniqueID } from \"@/lib/base\";\n\nexport type RippleType = {\n  key: React.Key;\n  x: number;\n  y: number;\n  size: number;\n};\n\nexport interface UseRippleProps {}\n\nexport function useRipple(props: UseRippleProps = {}) {\n  const [ripples, setRipples] = useState<RippleType[]>([]);\n\n  const onPress = useCallback((event: PressEvent) => {\n    const trigger = event.target;\n\n    const size = Math.max(trigger.clientWidth, trigger.clientHeight);\n\n    setRipples((prevRipples) => [\n      ...prevRipples,\n      {\n        key: getUniqueID(prevRipples.length.toString()),\n        size,\n        x: event.x - size / 2,\n        y: event.y - size / 2,\n      },\n    ]);\n  }, []);\n\n  const onClear = useCallback((key: React.Key) => {\n    setRipples((prevState) => prevState.filter((ripple) => ripple.key !== key));\n  }, []);\n\n  return { ripples, onClear, onPress, ...props };\n}\n\nexport type UseRippleReturn = ReturnType<typeof useRipple>;\n",
      "type": "registry:ui"
    }
  ]
}